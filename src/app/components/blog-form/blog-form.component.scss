// Blog Form Component Styles with Theme Integration

// Modal Sizing - Make it full screen
:host {
  ion-modal {
    --width: 100% !important;
    --max-width: 100vw;
    --height: 100% !important;
    --max-height: 100vh;
    --border-radius: 0;
    --box-shadow: none;
    
    // Remove any margins or positioning constraints
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    margin: 0;
    padding: 0;
    
    // Ensure modal backdrop covers everything
    &::part(backdrop) {
      background: rgba(0, 0, 0, 0.4);
    }
    
    // Ensure content fills entire screen
    &::part(content) {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      width: 100%;
      height: 100%;
      margin: 0;
      padding: 0;
      border-radius: 0;
      max-width: none;
      max-height: none;
    }
  }
}

.blog-form-content {
  --padding-top: 0;
  --padding-bottom: 0;
  --padding-start: 0;
  --padding-end: 0;
  height: 100%;
  overflow-y: auto;
}

form {
  padding: 20px;
  max-width: 100%;
  height: calc(100vh - 120px); // Account for header height
  overflow-y: auto;
  
  // Ensure form doesn't overflow
  overflow-x: hidden;
}

// Make sure the modal content is scrollable and fills screen
.blog-form-content {
  overflow-y: auto;
  max-height: 100vh;
  height: 100%;
}

// Global Input Styling to fix text visibility
ion-input {
  --background: var(--ion-color-light) !important;
  --color: var(--ion-color-dark) !important;
  --placeholder-color: var(--ion-color-medium) !important;
  --padding-start: 12px !important;
  --padding-end: 12px !important;
  
  input {
    background: var(--ion-color-light) !important;
    color: var(--ion-color-dark) !important;
    
    &::placeholder {
      color: var(--ion-color-medium) !important;
      opacity: 0.7 !important;
    }
  }
}

ion-item {
  --background: transparent !important;
  --color: var(--ion-color-dark) !important;
  --border-color: var(--ion-color-medium) !important;
  --inner-border-width: 0 0 1px 0 !important;
  margin-bottom: 8px;
  border-radius: 8px;

  &.ion-focused {
    --border-color: var(--ion-color-primary) !important;
    --highlight-color: var(--ion-color-primary) !important;
  }
  
  &.ion-invalid.ion-touched {
    --border-color: var(--ion-color-danger) !important;
    --highlight-color: var(--ion-color-danger) !important;
  }
}

ion-label {
  --color: var(--ion-color-dark) !important;
  font-weight: 500;
}

.error-message {
  color: var(--ion-color-danger);
  font-size: 0.875rem;
  margin-top: 4px;
  margin-left: 16px;
  margin-bottom: 8px;
}

.form-actions {
  margin-top: 24px;
  
  ion-button {
    margin-bottom: 12px;
    
    &:last-child {
      margin-bottom: 0;
    }
  }
}

.content-editor-container {
  margin-top: 16px;
  
  ion-label {
    font-weight: 600;
    margin-bottom: 8px;
    display: block;
    color: var(--ion-color-dark);
  }
}

// Theme Integration for Ocean Theme
:host-context(.theme-ocean) {
  ion-card {
    --background: rgba(102, 126, 234, 0.05);
    --color: #1a365d;
    border: 1px solid rgba(102, 126, 234, 0.2);
    border-radius: 12px;
    box-shadow: 0 4px 6px rgba(102, 126, 234, 0.1);
  }

  ion-card-header {
    --background: rgba(102, 126, 234, 0.1);
    --color: #1a365d;
  }

  ion-card-title {
    color: #2d3748;
    font-weight: 600;
  }

  ion-item {
    --background: transparent;
    --color: #2d3748;
    --border-color: rgba(102, 126, 234, 0.3);
    --inner-border-width: 0 0 1px 0;
    margin-bottom: 8px;
    border-radius: 8px;

    &.ion-focused {
      --border-color: #667eea;
      --highlight-color: #667eea;
    }
  }

  ion-input,
  ion-textarea {
    --background: rgba(255, 255, 255, 0.9) !important;
    --color: #2d3748 !important;
    --placeholder-color: #718096 !important;
    
    input {
      background: rgba(255, 255, 255, 0.9) !important;
      color: #2d3748 !important;
      
      &::placeholder {
        color: #718096 !important;
        opacity: 0.8 !important;
      }
    }

    &.ion-invalid.ion-touched {
      --border-color: var(--ion-color-danger);
      --highlight-color: var(--ion-color-danger);
    }
  }

  ion-label {
    --color: #4a5568;
    font-weight: 500;
  }

  ion-button {
    &[color="primary"] {
      --background: #667eea;
      --background-hover: #5a67d8;
      --background-activated: #4c51bf;
      --color: white;
    }
  }
}

// Theme Integration for Sunset Theme
:host-context(.theme-sunset) {
  ion-card {
    --background: rgba(255, 159, 67, 0.05);
    --color: #744210;
    border: 1px solid rgba(255, 159, 67, 0.2);
    border-radius: 12px;
    box-shadow: 0 4px 6px rgba(255, 159, 67, 0.1);
  }

  ion-card-header {
    --background: rgba(255, 159, 67, 0.1);
    --color: #744210;
  }

  ion-card-title {
    color: #8b4513;
    font-weight: 600;
  }

  ion-item {
    --background: transparent;
    --color: #8b4513;
    --border-color: rgba(255, 159, 67, 0.3);
    --inner-border-width: 0 0 1px 0;
    margin-bottom: 8px;
    border-radius: 8px;

    &.ion-focused {
      --border-color: #ff9f43;
      --highlight-color: #ff9f43;
    }
  }

  ion-input,
  ion-textarea {
    --background: rgba(255, 255, 255, 0.9) !important;
    --color: #8b4513 !important;
    --placeholder-color: #cd853f !important;
    
    input {
      background: rgba(255, 255, 255, 0.9) !important;
      color: #8b4513 !important;
      
      &::placeholder {
        color: #cd853f !important;
        opacity: 0.8 !important;
      }
    }

    &.ion-invalid.ion-touched {
      --border-color: var(--ion-color-danger);
      --highlight-color: var(--ion-color-danger);
    }
  }

  ion-label {
    --color: #a0522d;
    font-weight: 500;
  }

  ion-button {
    &[color="primary"] {
      --background: #ff9f43;
      --background-hover: #ff8c1a;
      --background-activated: #e6700a;
      --color: white;
    }
  }
}

// Theme Integration for Forest Theme
:host-context(.theme-forest) {
  ion-card {
    --background: rgba(46, 160, 67, 0.05);
    --color: #1b4332;
    border: 1px solid rgba(46, 160, 67, 0.2);
    border-radius: 12px;
    box-shadow: 0 4px 6px rgba(46, 160, 67, 0.1);
  }

  ion-card-header {
    --background: rgba(46, 160, 67, 0.1);
    --color: #1b4332;
  }

  ion-card-title {
    color: #2d5016;
    font-weight: 600;
  }

  ion-item {
    --background: transparent;
    --color: #2d5016;
    --border-color: rgba(46, 160, 67, 0.3);
    --inner-border-width: 0 0 1px 0;
    margin-bottom: 8px;
    border-radius: 8px;

    &.ion-focused {
      --border-color: #2ea043;
      --highlight-color: #2ea043;
    }
  }

  ion-input,
  ion-textarea {
    --background: rgba(255, 255, 255, 0.9) !important;
    --color: #2d5016 !important;
    --placeholder-color: #6a994e !important;
    
    input {
      background: rgba(255, 255, 255, 0.9) !important;
      color: #2d5016 !important;
      
      &::placeholder {
        color: #6a994e !important;
        opacity: 0.8 !important;
      }
    }

    &.ion-invalid.ion-touched {
      --border-color: var(--ion-color-danger);
      --highlight-color: var(--ion-color-danger);
    }
  }

  ion-label {
    --color: #386641;
    font-weight: 500;
  }

  ion-button {
    &[color="primary"] {
      --background: #2ea043;
      --background-hover: #28a745;
      --background-activated: #1e7e34;
      --color: white;
    }
  }
}

// Theme Integration for Cyberpunk Theme
:host-context(.theme-cyberpunk) {
  ion-card {
    --background: rgba(255, 0, 255, 0.05);
    --color: #e0e6ed;
    border: 1px solid rgba(255, 0, 255, 0.2);
    border-radius: 12px;
    box-shadow: 0 4px 6px rgba(255, 0, 255, 0.1);
  }

  ion-card-header {
    --background: rgba(255, 0, 255, 0.1);
    --color: #e0e6ed;
  }

  ion-card-title {
    color: #ff00ff;
    font-weight: 600;
  }

  ion-item {
    --background: transparent;
    --color: #e0e6ed;
    --border-color: rgba(255, 0, 255, 0.3);
    --inner-border-width: 0 0 1px 0;
    margin-bottom: 8px;
    border-radius: 8px;

    &.ion-focused {
      --border-color: #ff00ff;
      --highlight-color: #ff00ff;
    }
  }

  ion-input,
  ion-textarea {
    --background: rgba(0, 0, 0, 0.8) !important;
    --color: #e0e6ed !important;
    --placeholder-color: #a0a0a0 !important;
    
    input {
      background: rgba(0, 0, 0, 0.8) !important;
      color: #e0e6ed !important;
      
      &::placeholder {
        color: #a0a0a0 !important;
        opacity: 0.8 !important;
      }
    }

    &.ion-invalid.ion-touched {
      --border-color: var(--ion-color-danger);
      --highlight-color: var(--ion-color-danger);
    }
  }

  ion-label {
    --color: #c0c0c0;
    font-weight: 500;
  }

  ion-button {
    &[color="primary"] {
      --background: #ff00ff;
      --background-hover: #e600e6;
      --background-activated: #cc00cc;
      --color: #000000;
    }
  }
}

// Theme Integration for Royal Theme
:host-context(.theme-royal) {
  ion-card {
    --background: rgba(102, 51, 153, 0.05);
    --color: #4a1a4a;
    border: 1px solid rgba(102, 51, 153, 0.2);
    border-radius: 12px;
    box-shadow: 0 4px 6px rgba(102, 51, 153, 0.1);
  }

  ion-card-header {
    --background: rgba(102, 51, 153, 0.1);
    --color: #4a1a4a;
  }

  ion-card-title {
    color: #663399;
    font-weight: 600;
  }

  ion-item {
    --background: transparent;
    --color: #4a1a4a;
    --border-color: rgba(102, 51, 153, 0.3);
    --inner-border-width: 0 0 1px 0;
    margin-bottom: 8px;
    border-radius: 8px;

    &.ion-focused {
      --border-color: #663399;
      --highlight-color: #663399;
    }
  }

  ion-input,
  ion-textarea {
    --background: rgba(255, 255, 255, 0.9) !important;
    --color: #4a1a4a !important;
    --placeholder-color: #8e4ec6 !important;
    
    input {
      background: rgba(255, 255, 255, 0.9) !important;
      color: #4a1a4a !important;
      
      &::placeholder {
        color: #8e4ec6 !important;
        opacity: 0.8 !important;
      }
    }

    &.ion-invalid.ion-touched {
      --border-color: var(--ion-color-danger);
      --highlight-color: var(--ion-color-danger);
    }
  }

  ion-label {
    --color: #663399;
    font-weight: 500;
  }

  ion-button {
    &[color="primary"] {
      --background: #663399;
      --background-hover: #5a2d91;
      --background-activated: #4e2779;
      --color: white;
    }
  }
}

// Theme Integration for Midnight Theme
:host-context(.theme-midnight) {
  ion-card {
    --background: rgba(45, 55, 72, 0.7);
    --color: #e2e8f0;
    border: 1px solid rgba(74, 85, 104, 0.3);
    border-radius: 12px;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
  }

  ion-card-header {
    --background: rgba(45, 55, 72, 0.8);
    --color: #e2e8f0;
  }

  ion-card-title {
    color: #90cdf4;
    font-weight: 600;
  }

  ion-item {
    --background: transparent;
    --color: #e2e8f0;
    --border-color: rgba(74, 85, 104, 0.4);
    --inner-border-width: 0 0 1px 0;
    margin-bottom: 8px;
    border-radius: 8px;

    &.ion-focused {
      --border-color: #90cdf4;
      --highlight-color: #90cdf4;
    }
  }

  ion-input,
  ion-textarea {
    --background: rgba(0, 0, 0, 0.8) !important;
    --color: #e2e8f0 !important;
    --placeholder-color: #a0aec0 !important;
    
    input {
      background: rgba(0, 0, 0, 0.8) !important;
      color: #e2e8f0 !important;
      
      &::placeholder {
        color: #a0aec0 !important;
        opacity: 0.8 !important;
      }
    }

    &.ion-invalid.ion-touched {
      --border-color: var(--ion-color-danger);
      --highlight-color: var(--ion-color-danger);
    }
  }

  ion-label {
    --color: #cbd5e0;
    font-weight: 500;
  }

  ion-button {
    &[color="primary"] {
      --background: #90cdf4;
      --background-hover: #7cc7f0;
      --background-activated: #63b3ed;
      --color: #1a202c;
    }
  }
}

// Responsive Design
@media (max-width: 768px) {
  form {
    padding: 12px;
  }

  ion-card {
    margin: 8px 0;
  }

  .content-editor-container {
    margin-top: 12px;
  }

  .form-actions {
    margin-top: 16px;
  }
}

// Quill Editor Styling for Better UX in Larger Modal
:host ::ng-deep {
  .ql-toolbar {
    border: 1px solid var(--ion-color-medium);
    border-bottom: 0;
    border-radius: 8px 8px 0 0;
    background: var(--ion-color-light);
    padding: 8px 12px;
    
    .ql-formats {
      margin-right: 15px;
    }
    
    .ql-picker-label {
      border: 1px solid transparent;
      border-radius: 4px;
      padding: 2px 6px;
      transition: all 0.2s ease;
      
      &:hover {
        background: var(--ion-color-light-shade);
        border-color: var(--ion-color-medium-shade);
      }
    }
    
    button {
      border: 1px solid transparent;
      border-radius: 4px;
      padding: 4px;
      margin: 0 2px;
      transition: all 0.2s ease;
      
      &:hover {
        background: var(--ion-color-light-shade);
        border-color: var(--ion-color-medium-shade);
      }
      
      &.ql-active {
        background: var(--ion-color-primary);
        color: white;
        border-color: var(--ion-color-primary-shade);
      }
    }
  }
  
  .ql-container {
    border: 1px solid var(--ion-color-medium);
    border-radius: 0 0 8px 8px;
    font-size: 16px;
    line-height: 1.6;
    
    .ql-editor {
      min-height: 400px;
      max-height: 600px;
      overflow-y: auto;
      padding: 16px;
      font-family: var(--ion-font-family);
      color: var(--ion-color-dark);
      
      &.ql-blank::before {
        color: var(--ion-color-medium);
        font-style: italic;
        left: 16px;
      }
      
      // Enhanced spacing for better readability
      p {
        margin-bottom: 12px;
        
        &:last-child {
          margin-bottom: 0;
        }
      }
      
      h1, h2, h3, h4, h5, h6 {
        margin-top: 16px;
        margin-bottom: 8px;
        font-weight: 600;
        
        &:first-child {
          margin-top: 0;
        }
      }
      
      ul, ol {
        margin-bottom: 12px;
        padding-left: 24px;
        
        li {
          margin-bottom: 4px;
        }
      }
      
      blockquote {
        border-left: 4px solid var(--ion-color-primary);
        padding-left: 16px;
        margin: 16px 0;
        color: var(--ion-color-dark-shade);
        font-style: italic;
      }
      
      code {
        background: var(--ion-color-light-shade);
        padding: 2px 4px;
        border-radius: 4px;
        font-family: 'Monaco', 'Consolas', monospace;
        font-size: 0.9em;
      }
      
      pre {
        background: var(--ion-color-light-shade);
        padding: 12px;
        border-radius: 6px;
        overflow-x: auto;
        margin: 12px 0;
        
        code {
          background: transparent;
          padding: 0;
        }
      }
    }
  }
  
  // Theme-specific styling for Quill
  &.theme-ocean {
    .ql-toolbar {
      background: rgba(102, 126, 234, 0.05);
      border-color: rgba(102, 126, 234, 0.2);
    }
    
    .ql-container {
      border-color: rgba(102, 126, 234, 0.2);
    }
  }
  
  &.theme-sunset {
    .ql-toolbar {
      background: rgba(255, 107, 107, 0.05);
      border-color: rgba(255, 107, 107, 0.2);
    }
    
    .ql-container {
      border-color: rgba(255, 107, 107, 0.2);
    }
  }
  
  &.theme-forest {
    .ql-toolbar {
      background: rgba(72, 187, 120, 0.05);
      border-color: rgba(72, 187, 120, 0.2);
    }
    
    .ql-container {
      border-color: rgba(72, 187, 120, 0.2);
    }
  }
  
  &.theme-midnight {
    .ql-toolbar {
      background: rgba(99, 102, 241, 0.05);
      border-color: rgba(99, 102, 241, 0.2);
    }
    
    .ql-container {
      border-color: rgba(99, 102, 241, 0.2);
    }
  }
  
  &.theme-rose {
    .ql-toolbar {
      background: rgba(236, 72, 153, 0.05);
      border-color: rgba(236, 72, 153, 0.2);
    }
    
    .ql-container {
      border-color: rgba(236, 72, 153, 0.2);
    }
  }
  
  &.theme-golden {
    .ql-toolbar {
      background: rgba(245, 158, 11, 0.05);
      border-color: rgba(245, 158, 11, 0.2);
    }
    
    .ql-container {
      border-color: rgba(245, 158, 11, 0.2);
    }
  }
}
