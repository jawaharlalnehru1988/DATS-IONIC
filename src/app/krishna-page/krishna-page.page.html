<app-reusable-header
  [titleKey]="'krishnaPageTitle'"
  [translucent]="true"
  [showMenuButton]="true">
</app-reusable-header>


<ion-content [fullscreen]="true" class="krishna-content">
  <!-- Pull to Refresh -->
  <ion-refresher slot="fixed" (ionRefresh)="handleRefresh($event)" pullFactor="0.5" pullMin="100" pullMax="200">
    <ion-refresher-content
      pullingIcon="chevron-down-circle-outline"
      pullingText="Pull to refresh"
      refreshingSpinner="circular"
      refreshingText="Refreshing...">
    </ion-refresher-content>
  </ion-refresher>

  <div class="promo-card">
    <div class="image-carousel"
      (mouseenter)="pauseCarousel()"
      (mouseleave)="resumeCarousel()">
      <div class="carousel-container">
        @for (image of carouselImages; track image; let i = $index) {
          <img
            [src]="image.src"
            [alt]="image.alt"
            class="carousel-image"
            [class.active]="i === currentImageIndex"
            />
        }
      </div>

      <!-- Navigation arrows -->
      <button class="carousel-nav prev" (click)="previousImage()" aria-label="Previous image">
        <ion-icon name="chevron-back"></ion-icon>
      </button>
      <button class="carousel-nav next" (click)="nextImage()" aria-label="Next image">
        <ion-icon name="chevron-forward"></ion-icon>
      </button>

      <div class="carousel-indicators">
        @for (image of carouselImages; track image; let i = $index) {
          <span
            class="indicator"
            [class.active]="i === currentImageIndex"
            [attr.data-index]="i"
            (click)="goToImage(i)">
          </span>
        }
      </div>
    </div>
  </div>

  <app-segmented-tabs
    [tabs]="contentCategories"
    [selectedTab]="selectedTopic"
    containerClass="krishna-tabs-container"
    (tabChanged)="selectedTopic = $event">
  </app-segmented-tabs>

  <div>
    @switch (selectedTopic) {
      @case ('Arati') {
        <!-- Skeleton Loader -->
        @if (isLoading) {
          <app-skeleton-loader 
            [config]="{
              type: 'cards',
              itemCount: 5,
              showCategoryTitle: true,
              cardLayout: 'grid'
            }">
          </app-skeleton-loader>
        }
        <!-- Content (shown when not loading) -->
        @if (!isLoading) {
          <div>
            @for (inputData of inputDatas; track inputData) {
              <div>
                <app-display-card-list [inputData]="inputData" (cardSelected)="onCardSelected($event)" (playAllClicked)="onPlayAllClicked($event)"></app-display-card-list>
              </div>
            }
            <!-- Add Category Button -->
            
          </div>
        }
      }
      @case ('Hare Krishna Kirtan') {
        <!-- Example: List-style skeleton loader -->
        @if (isLoading) {
          <app-skeleton-loader 
            [config]="{
              type: 'list',
              itemCount: 8,
              showCategoryTitle: true
            }">
          </app-skeleton-loader>
        } @else {
          <section class="coming-soon-section">Content yet to be added</section>
        }
      }
      @case ('Stories') {
        <!-- Example: Article-style skeleton loader -->
        @if (isLoading) {
          <app-skeleton-loader 
            [config]="{
              type: 'article',
              showCategoryTitle: false
            }">
          </app-skeleton-loader>
        } @else {
          <section class="coming-soon-section">Content yet to be added</section>
        }
      }
      @case ('philosophy') {
        <section class="coming-soon-section">Content yet to be added</section>
      }
      @case ('discussion') {
        <section class="coming-soon-section">Content yet to be added</section>
      }
      @case ('images') {
        <section class="coming-soon-section">Content yet to be added</section>
      }
      @case ('videos') {
        <section class="coming-soon-section">Content yet to be added</section>
      }
      @default {
        <p>Select a category to view content.</p>
      }
    }
  </div>
</ion-content>



<ion-footer class="krishna-footer">
  <ion-toolbar>
    <ion-buttons>
      <ion-button>
        <ion-icon name="home" slot="icon-only"></ion-icon>
      </ion-button>
      <ion-button>
        <ion-icon name="heart-outline" slot="icon-only"></ion-icon>
      </ion-button>
      <ion-button>
        <ion-icon name="cafe-outline" slot="icon-only"></ion-icon>
      </ion-button>
      <ion-button>
        <ion-icon name="person-outline" slot="icon-only"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-footer>